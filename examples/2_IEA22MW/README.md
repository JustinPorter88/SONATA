# Example 2: IEA 22 MW Wind Turbine Simulation  

This example demonstrates the use of SONATA to compute the cross sectional stiffness and inertia properties, the sectional stress and strain maps, and the modal structural damping of the blade of the IEA 22 MW offshore wind turbine blade. 

## Usage  
1. Navigate to the example directory:  
    ```bash  
    cd /Users/pbortolo/work/4_2d_fem/SONATA/examples/2_IEA22MW  
    ```  
2. Make sure the flag `flag_estimate_structural_damping` is set to True in the file 2_sonata_IEA22.py
3. Run the simulation script 2_sonata_IEA22.py provided in the directory.  
4. Paste the BeamDyn files generated by the script into the folder `structural_damping/openfast`
5. Ensure that the BeamDyn files have the following nodal output information at the bottom of the `IEA-22-280-RWT_BeamDyn.dat` file.
   These likely need to get added if a new file from SONATA is used.
   Also, ensure that the summary file is produced.
   The end of the file should look like the following:
   ```
    ---------------------- OUTPUTS -------------------------------------------------
    True          SumPrint       - Print summary data to "<RootName>.sum" (flag)
    "ES12.3E2"    OutFmt         - Format used for text tabular output, excluding the time channel.
              1   NNodeOuts      - Number of nodes to output to file [0 - 9] (-)
              1,          2,          3,          4,          5,          6    OutNd          - Nodes whose values will be output  (-)
              OutList            - The next line(s) contains a list of output parameters. See OutListParameters.xlsx for a listing of available output channels, (-)
    "RootFxr, RootFyr, RootFzr"
    "RootMxr, RootMyr, RootMzr"
    "TipTDxr, TipTDyr, TipTDzr"
    END of input file (the word "END" must appear in the first 3 columns of this last OutList line)
    ====== Outputs for all blade stations (same ending as above for B1N1.... =========================== (optional section)
       "All"          BldNd_BlOutNd       - Future feature will allow selecting a portion of the nodes to output.  Not implemented yet. (-)
                      OutList             - The next line(s) contains a list of output parameters.  See OutListParameters.xlsx for a listing of available output channels, (-)
    "TDxr"
    "TDyr"
    "TDzr"
    "RDxr"
    "RDyr"
    "RDzr"
    "FxL"
    "FyL"
    "FzL"
    "MxL"
    "MyL"
    "MzL"
    END of input file (the word "END" must appear in the first 3 columns of this last OutList line)
   ```
5. Run the model. OpenFAST will linearize it
6. With the openfast-toolbox, run the script `eigenanalysis.py`
7. Run the script `generate_pie_charts.py`
